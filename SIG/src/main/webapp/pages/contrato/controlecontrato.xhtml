<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	template="/templates/modelo.xhtml">

	<ui:define name="metadata">

		<f:metadata>

			<f:event
				listener="#{contratoTerceirizadoBean.ContratoTerceirizadoListas()}"
				type="preRenderView" />
		</f:metadata>
	</ui:define>

	<ui:define name="conteudo">

		<h:outputStylesheet name="primeicons/primeicons.css"
			library="primefaces" />
			
		


		<style type="text/css">
.ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active
	{
	color: #333333 !important;
	text-shadow: 0 1px 1px rgb(255 255 255/ 75%) !important;
	cursor: pointer !important;
	background-color: #f5f5f5 !important;
	*background-color: #e6e6e6 !important;
	background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff),
		to(#e6e6e6)) !important;
	background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6)
		!important;
	background-image: -o-linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-image: linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-repeat: repeat-x !important;
	border: 1px solid #cccccc !important;
	*border: 0 !important;
	border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25)
		!important;
	border-color: #e6e6e6 #e6e6e6 #bfbfbf !important;
	border-bottom-color: #b3b3b3 !important;
	-webkit-border-radius: 4px !important;
	-moz-border-radius: 4px !important;
	border-radius: 4px !important;
	filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ffffff',
		endColorstr='#e6e6e6', GradientType=0) !important;
	filter: progid:dximagetransform.microsoft.gradient(enabled=false)
		!important;
	*zoom: 1 !important;
	-webkit-box-shadow: inset 0 1px 0 rgb(255 255 255/ 20%), 0 1px 2px
		rgb(0 0 0/ 5%) !important;
	-moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px
		rgba(0, 0, 0, 0.05) !important;
	box-shadow: inset 0 1px 0 rgb(255 255 255/ 20%), 0 1px 2px
		rgb(0 0 0/ 5%) !important;
}

.ui-state-highlight, .ui-widget-content .ui-state-highlight,
	.ui-widget-header .ui-state-highlight {
	color: #333333 !important;
	text-shadow: 0 1px 1px rgb(255 255 255/ 75%) !important;
	cursor: pointer !important;
	background-color: #f5f5f5 !important;
	*background-color: #e6e6e6 !important;
	background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff),
		to(#e6e6e6)) !important;
	background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6)
		!important;
	background-image: -o-linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-image: linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6) !important;
	background-repeat: repeat-x !important;
	border: 1px solid #cccccc !important;
	*border: 0 !important;
	border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25)
		!important;
	border-color: #e6e6e6 #e6e6e6 #bfbfbf !important;
	border-bottom-color: #b3b3b3 !important;
	-webkit-border-radius: 4px !important;
	-moz-border-radius: 4px !important;
	border-radius: 4px !important;
	filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ffffff',
		endColorstr='#e6e6e6', GradientType=0) !important;
	filter: progid:dximagetransform.microsoft.gradient(enabled=false)
		!important;
	*zoom: 1 !important;
	-webkit-box-shadow: inset 0 1px 0 rgb(255 255 255/ 20%), 0 1px 2px
		rgb(0 0 0/ 5%) !important;
	-moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px
		rgba(0, 0, 0, 0.05) !important;
	box-shadow: inset 0 1px 0 rgb(255 255 255/ 20%), 0 1px 2px
		rgb(0 0 0/ 5%) !important;
}


.value {
	font-weight: bold;
}



</style>



		<p:tabView id="tabView">
			<p:tab title="Contratos">
				<h:form id="formularioContratos">
					<h:panelGroup id="painelDados" layout="block">




						<!-- <h:panelGrid columns="2"
							rendered="#{credenciadoEmpBean.exibePainelDados}">
							 -->
						<p:panelGrid columns="1" layout="grid">



							<p:dataTable id="listaContratos"     paginator="true" 
								emptyMessage="Nenhum contrato encontrado."
								rowExpandMode="single" rows="10" rowKey="#{contrato.codigo}"
								value="#{contratoTerceirizadoBean.listaContratosTerceirizados}"
								var="contrato" selectionMode="single"
								selection="#{contratoTerceirizadoBean.codigoContratoHistorico}">

								<p:ajax event="rowSelect"
									listener="#{contratoTerceirizadoBean.onRowSelectCodContrato}"
									oncomplete="PF('dialogoHistContrato').show();"
									update=":mensagem contratoHist:listaHistorico" />
								<p:ajax event="rowUnselect"
									listener="#{contratoTerceirizadoBean.onRowUnselect}" />

								<f:facet name="header">
									<h3>CONTRATOS</h3>

									<p:commandButton value="Adicionar Novo Contrato"
										rendered="#{contratoTerceirizadoBean.mostrarAcoes == true}"
										title="Adicionar Novo Contrato"
										actionListener="#{contratoTerceirizadoBean.listar}"
										styleClass="rounded-button ui-button-success"
										icon="pi pi-plus-circle"
										oncomplete="PF('dialogoNovoContrato').show();"
										update="tabView:formularioContratos:listaContratos :contrato:dadosForm">

									</p:commandButton>

								</f:facet>


								<p:ajax event="rowToggle"
									listener="#{contratoTerceirizadoBean.onRowToggleFuncionarios}"
									update="listaFuncionarios" />
								<p:column headerText="Funcionários"
									style="width: 3%; text-align: center;">


									<p:rowToggler />



								</p:column>
								<p:column headerText="Contrato" sortBy="#{contrato.nContrato}"
								
									filterBy="#{contrato.nContrato}" 
									filterMatchMode="contains" 
									style="width: 4%; text-align: center;">
									<h:outputText value="#{contrato.nContrato}" />
								</p:column>

								<p:column headerText="Empresa"
									sortBy="#{contrato.empresaTerceirizada.pessoaJuridica.nomeFantasia}" 
									filterMatchMode="contains"
									filterBy="#{contrato.empresaTerceirizada.pessoaJuridica.nomeFantasia}"
									style="width: 4%; text-align: center;">
									<h:outputText
										value="#{contrato.empresaTerceirizada.pessoaJuridica.nomeFantasia}" />
								</p:column>


								<p:column headerText="Número SGPE" sortBy="#{contrato.nSGPE}"
									filterBy="#{contrato.nSGPE}" 
									filterMatchMode="contains"
									style="width: 4%; text-align: center;">
									<h:outputText value="#{contrato.nSGPE}" />
								</p:column>

								<p:column headerText="Unidade"
									sortBy="#{contrato.unidade.unidadeNome}" 
									filterMatchMode="contains" 
									filterBy="#{contrato.unidade.unidadeNome}"
									style="width: 6%; text-align: center;">
									<h:outputText value="#{contrato.unidade.unidadeNome}" />
								</p:column>


								<p:column headerText="Município"
									sortBy="#{contrato.municipio.nome}"
									filterMatchMode="contains"
									filterBy="#{contrato.municipio.nome}"
									style="width: 4%; text-align: center;">
									<h:outputText value="#{contrato.municipio.nome}" />
								</p:column>



								<p:column headerText="Quantidade"
									sortBy="#{contrato.qtdFuncionarios}"
									filterMatchMode="contains"
									filterBy="#{contrato.qtdFuncionarios}"
									style="width: 3%; text-align: center;">
									<h:outputText value="#{contrato.qtdFuncionarios}" />
								</p:column>

								<p:column headerText="Atividade"
									sortBy="#{contrato.cargoTerceirizado.descricao}"
									filterMatchMode="contains"
									filterBy="#{contrato.cargoTerceirizado.descricao}"
									style="width: 5%; text-align: center;">
									<h:outputText value="#{contrato.cargoTerceirizado.descricao}" />
								</p:column>

								<p:column headerText="H/Dia" sortBy="#{contrato.hrContrato}"
								filterMatchMode="contains"
									filterBy="#{contrato.hrContrato}"
									style="width: 3%; text-align: center;">
									<h:outputText value="#{contrato.hrContrato}" />
								</p:column>

								<p:column headerText="Valor NF" sortBy="#{contrato.valorNF}"
								filterMatchMode="contains"
									filterBy="#{contrato.valorNF}"
									style="width: 5%; text-align: center;">
									<h:outputText value="#{contrato.valorNF}">
										<f:convertNumber type="currency" />
									</h:outputText>
								</p:column>

								<p:column headerText="Ações"
									style="width: 4%; text-align: center;"
									rendered="#{contratoTerceirizadoBean.ciretran == true and contratoTerceirizadoBean.citran == true}">


									<p:commandButton title="Adicionar funcionário"
										actionListener="#{contratoTerceirizadoBean.novoFuncionario}"
										icon="pi pi-user-plus"
										onclick="PF('dialogoNovoFuncionario').show();"
										
										styleClass="rounded-button ui-button-sucess"

										update=":mensagem funcionario:dadosFormFunc listaFuncionarios">
										<f:attribute name="contratoSelecionado" value="#{contrato}" />
										<f:actionListener
											type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />

									</p:commandButton>

									<p:commandButton title="Editar contrato"
										rendered="#{contratoTerceirizadoBean.mostrarAcoes == true}"
										actionListener="#{contratoTerceirizadoBean.editar}"
										icon="pi pi-pencil"
										onclick="PF('dialogoNovoContrato').show();"
										styleClass="rounded-button ui-button-secondary"
										update=":mensagem contrato:dadosForm">
										<f:attribute name="contratoSelecionado" value="#{contrato}" />
										<f:actionListener
											type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />
									</p:commandButton>

									<p:commandButton title="Excluir"
										rendered="#{contratoTerceirizadoBean.mostrarAcoes == true}"
										actionListener="#{contratoTerceirizadoBean.excluirContrato}"
										icon="pi pi-times"
										styleClass="rounded-button ui-button-danger"
										update=":mensagem tabView:formularioContratos:painelDados">
										<p:confirm header="Confirmação"
											message="Deseja Excluir o Contrato?" icon="ui-icon-alert" />
										<f:attribute name="contratoSelecionado" value="#{contrato}" />
										<f:actionListener
											type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />

									</p:commandButton>

								</p:column>

								<p:rowExpansion>
									<p:dataTable id="listaFuncionarios"
										emptyMessage="Nenhum funcionário encontrado." paginator="true"
										value="#{contratoTerceirizadoBean.listaContratoRelacoes}"
										filteredValue="#{contratoTerceirizadoBean.filteredListaContratoRelacoes}"
										var="relacao" rows="10">

										<p:column headerText="Funcionário"
											sortBy="#{relacao.funcionarioTerceirizado.pessoa.nomeCompleto}"
											filterMatchMode="contains"
											filterBy="#{relacao.funcionarioTerceirizado.pessoa.nomeCompleto}"
											style="width: 7%; text-align: center;">
											<h:outputText
												value="#{relacao.funcionarioTerceirizado.pessoa.nomeCompleto.toUpperCase()}" />


										</p:column>


										<p:column headerText="Cargo Funcionário"
											style="width: 7%; text-align: center;">
											<h:outputText
												value="#{relacao.funcionarioTerceirizado.cargoTerceirizado.descricao}" />

										</p:column>

										<p:column headerText="Unidade Funcionário"
											style="width: 7%; text-align: center;">
											<h:outputText
												value="#{relacao.funcionarioTerceirizado.unidade.unidadeNome}" />

										</p:column>



										<p:column headerText="Cadastrado Por" style="width: 7%;">
											<h:outputText
												value="#{relacao.usuarioCadastro.pessoa.nomeCompleto.toUpperCase()}" />
										</p:column>

										<p:column headerText="Data Cadastro" style="width: 3%;">
											<h:outputText value="#{relacao.dataCadastro}">
												<f:convertDateTime pattern="dd/MM/yyyy" />
											</h:outputText>
										</p:column>

										<p:column headerText="Status" style="width: 3%;">
											<h:outputText value="#{relacao.status}" rendered="#{relacao.status != 'Inconsistência'}" />
											
											<h:outputText value="Ativo" rendered="#{relacao.status == 'Inconsistência'}" />
										</p:column>

										<p:column headerText="Ações"
											style="width: 3%; text-align: center;">


											<p:commandButton title="Férias/Afastamento/Inconsistências"
												rendered="#{contratoTerceirizadoBean.ciretran == true and contratoTerceirizadoBean.citran == true}"
												actionListener="#{contratoTerceirizadoBean.novoEvento}"
												icon="pi pi-calendar"
												onclick="PF('dialogoFeriasAfastamentoInconsistencias').show();"
												styleClass="rounded-button ui-button-warning"
												update=":mensagem feriasAfastamentoInconsistencias:dadosFormFeriasAfastamentoInconsistencias, feriasAfastamentoInconsistencias:dadosFormInco,
feriasAfastamentoInconsistencias:dadosFormDiasPergunta,
feriasAfastamentoInconsistencias:dadosFormSubs, formlista:lista, feriasAfastamentoInconsistencias:salvarEvento">
												<f:attribute name="funcionarioSelecionado"
													value="#{relacao}" />
												<f:actionListener
													type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />


											</p:commandButton>



											<p:commandButton title="Remover"
												rendered="#{contratoTerceirizadoBean.ciretran == true and contratoTerceirizadoBean.citran == true}"
												actionListener="#{contratoTerceirizadoBean.carregaRelacao}"
												icon="pi pi-times" onclick="PF('dlg2').show();"
												styleClass="rounded-button ui-button-danger"
												update=":mensagem formularioCancelar:listaRemover">
												<f:attribute name="funcionarioSelecionado"
													value="#{relacao}" />
												<f:actionListener
													type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />


											</p:commandButton>



										</p:column>









									</p:dataTable>
								</p:rowExpansion>



							</p:dataTable>

							<p:confirmDialog global="true">

								<p:commandButton value="Sim" type="button"
									styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
								<p:commandButton value="Não" type="button"
									styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
							</p:confirmDialog>

						</p:panelGrid>



						<br />
						<br />






					</h:panelGroup>






				</h:form>


			</p:tab>








		</p:tabView>















		<p:dialog widgetVar="dialogoNovoContrato" draggable="false"
			resizable="true" modal="true" closable="true" responsive="true">
			<f:facet name="header">

				<h:outputText id="someDialogHeader" value="Contrato" />

			</f:facet>

			<h:form id="contrato">



				<p:panel header="Contrato">

					<p:panelGrid id="dadosForm" columns="2" layout="tabular"
						style="margin: 0 auto;" styleClass="ui-noborder">

						<p:outputLabel value="Empresa " />
						<p:selectOneMenu id="empresa" filter="true" style="width:320px"
							requiredMessage="O campo Empresa é obrigatório"
							converter="omnifaces.SelectItemsConverter"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.empresaTerceirizada}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione uma empresa" />
							<f:selectItems
								value="#{contratoTerceirizadoBean.listaEmpresasTerceirizadas}"
								var="empresa" itemValue="#{empresa}"
								itemLabel="#{empresa.pessoaJuridica.nomeFantasia}" />
						</p:selectOneMenu>

						<p:outputLabel value="Nº Contrato" />
						<p:inputText maxlength="255" size="50" id="nContrato"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.nContrato}"
							required="true"
							requiredMessage="O campo Nº Contrato é obrigatório" />

						<p:outputLabel value="Nº SGPE" />
						<p:inputText maxlength="255" size="50" id="nSGPE"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.nSGPE}"
							required="true" requiredMessage="O campo Nº SGPE é obrigatório" />



						<p:outputLabel value="Unidade " />
						<p:selectOneMenu id="unidade" filter="true" style="width:320px"
							requiredMessage="O campo Unidade é obrigatório"
							converter="omnifaces.SelectItemsConverter"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.unidade}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione uma unidade" />
							<f:selectItems value="#{contratoTerceirizadoBean.unidades}"
								var="unidade" itemValue="#{unidade}"
								itemLabel="#{unidade.unidadeNome}" />
						</p:selectOneMenu>

						<p:outputLabel value="Município" />
						<p:selectOneMenu id="municipio" filter="true" required="true"
							style="width:320px"
							requiredMessage="O campo Município é obrigatório"
							converter="omnifaces.SelectItemsConverter"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.municipio}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione uma cidade" />
							<f:selectItems value="#{contratoTerceirizadoBean.cidades}"
								var="cidade" itemValue="#{cidade}" itemLabel="#{cidade.nome}" />
						</p:selectOneMenu>



						<p:outputLabel value="Qtd Funcionários" />

						<p:inputText id="quantidade" size="50"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.qtdFuncionarios}"
							required="true"
							requiredMessage="O campo Quantidade é obrigatório" />

						<p:outputLabel value="H/Dia" />

						<p:inputText id="hrDia" size="50"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.hrContrato}"
							required="true" requiredMessage="O campo H/Dia é obrigatório" />

						<p:outputLabel value="Atividade: " />
						<p:selectOneMenu id="atividade" filter="true" style="width:320px"
							requiredMessage="O campo Atividade é obrigatório"
							converter="omnifaces.SelectItemsConverter"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.cargoTerceirizado}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione um cargo" />
							<f:selectItems value="#{contratoTerceirizadoBean.cargos}"
								var="cargo" itemValue="#{cargo}" itemLabel="#{cargo.descricao}" />
						</p:selectOneMenu>






						<p:outputLabel for="moeda" value="Valor NF" />


						<p:inputNumber id="moeda" size="52"
							value="#{contratoTerceirizadoBean.contratoTerceirizado.valorNF}"
							symbol="R$: " symbolPosition="p" decimalSeparator=","
							thousandSeparator="." styleClass="moeda">

						</p:inputNumber>





					</p:panelGrid>

					<br />
					<br />
					<h:panelGrid columns="2" style="margin: 0 auto;">
						<p:commandButton value="Salvar" 
							actionListener="#{contratoTerceirizadoBean.salvar()}"
							update=":mensagem tabView:formularioContratos:painelDados"
							oncomplete="PF('dialogoNovoContrato').hide();"
							styleClass="rounded-button ui-button-success" icon="pi pi-save" />

						<p:commandButton value="Cancelar" styleClass="rounded-button ui-button-info"
							update="tabView:formularioContratos:painelDados"
							oncomplete="PF('dialogoNovoContrato').hide();" />

					</h:panelGrid>



				</p:panel>






















			</h:form>



		</p:dialog>

		<p:dialog widgetVar="dialogoHistContrato" draggable="false"
			resizable="true" modal="true" closable="true" responsive="true">
			<f:facet name="header">

				<h:outputText id="someDialogHeader2"
					value="Histórico Edições Contrato" />

			</f:facet>

			<h:form id="contratoHist">



				<p:panel header="Contrato">



					<p:dataTable id="listaHistorico" showGridlines="true"
						emptyMessage="Nenhum registro encontrado." paginator="true"
						rows="5" value="#{contratoTerceirizadoBean.historicoEdicoes}"
						var="hist">


						<p:column headerText="Contrato" >
							<h:outputText 
								value="#{hist.contrato.nContrato} - #{hist.contrato.empresaTerceirizada.pessoaJuridica.nomeFantasia} - #{hist.contrato.municipio.nome}" />
						</p:column>


						<p:column headerText="SGPE" style="width: 90px; text-align: center;">
							<h:outputText value="#{hist.nSGPE}" />
						</p:column>
						
						<p:column headerText="Qtd Funcionários" style="width: 70px; text-align: center;">
							<h:outputText value="#{hist.qtdFuncionarios}" />
						</p:column>
						
						<p:column headerText="H/Dia" style="width: 70px; text-align: center;">
							<h:outputText value="#{hist.hrContrato}" />
						</p:column>
						
						<p:column headerText="Valor NF" style="width: 80px; text-align: center;">
							
							
							<h:outputText value="#{hist.valorNF}">
										<f:convertNumber type="currency" />
									</h:outputText>
						</p:column>


						<p:column headerText="Usuário Cadastro" >
							<h:outputText value="#{hist.usuarioCadastro.pessoa.nomeCompleto}" />
						</p:column>

						<p:column headerText="Data Cadastro"
							style="width: 70px; text-align: center;">
							<h:outputText value="#{hist.dataCadastro}">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm"
									timeZone="America/Fortaleza" />
							</h:outputText>
						</p:column>


					<!--  	<p:column headerText="Ações"
							style="width: 3%; text-align: center;">

							<p:commandButton icon="ui-icon-trash"
								actionListener="#{contratoTerceirizadoBean.excluirHistorico}"
								update=":mensagem contratoHist:listaHistorico">
								<p:confirm header="Confirmação"
									message="Deseja excluir o Historico?" icon="ui-icon-alert" />
								<f:attribute name="histSelecionado" value="#{hist}" />
							</p:commandButton>

						</p:column> -->





					</p:dataTable>



				</p:panel>






















			</h:form>



		</p:dialog>

		<p:dialog widgetVar="dialogoNovoFuncionario" draggable="false"
			resizable="true" modal="true" closable="true" responsive="true">
			<f:facet name="header">

				<h:outputText id="someDialogHeaderFunc" value="Funcionário" />

			</f:facet>

			<h:form id="funcionario">



				<p:panel header="Novo Funcionário">

					<p:panelGrid id="dadosFormFunc" columns="2" layout="tabular"
						style="margin: 0 auto;" styleClass="ui-noborder">


						<p:outputLabel value="Funcionário: " />
						<p:selectOneMenu id="func" filter="true" style="width:320px"
							requiredMessage="O campo Funcionário é obrigatório"
							converter="omnifaces.SelectItemsConverter"
							value="#{contratoTerceirizadoBean.funcionarioSelecionado}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione um funcionário" />
							<f:selectItems
								value="#{contratoTerceirizadoBean.listaFuncionarios}" var="func"
								itemValue="#{func}"
								itemLabel="#{func.pessoa.nomeCompleto.toUpperCase()}" />

							<p:ajax event="change" update="cpf, dataNascimento, rg"
								process="@this"
								listener="#{contratoTerceirizadoBean.dadosFuncSelecionado()}" />

						</p:selectOneMenu>

						<h:outputText value="CPF:" style="font-weight: bold;" />
						<h:outputText id="cpf"
							value="#{contratoTerceirizadoBean.pessoa.cpf}" />

						<h:outputText value="RG:" style="font-weight: bold;" />
						<h:outputText id="rg"
							value="#{contratoTerceirizadoBean.pessoa.rg} #{contratoTerceirizadoBean.pessoa.rgOrgaoEmissor}" />

						<h:outputText value="Data Nascimento:" style="font-weight: bold;" />
						<h:outputText id="dataNascimento"
							value="#{contratoTerceirizadoBean.pessoa.dataNascimento}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>






					</p:panelGrid>

					<br />
					<br />
					<h:panelGrid columns="2" style="margin: 0 auto;">
						<p:commandButton value="Salvar"
							actionListener="#{contratoTerceirizadoBean.salvarNovoFuncionario()}"
							update=":mensagem tabView:formularioContratos:painelDados"
							oncomplete="PF('dialogoNovoFuncionario').hide();"
							styleClass="rounded-button ui-button-success" icon="pi pi-save">

						</p:commandButton>

						<p:commandButton value="Cancelar" styleClass="rounded-button ui-button-info"
							update="tabView:formularioContratos:painelDados"
							oncomplete="PF('dialogoNovoFuncionario').hide();" />

					</h:panelGrid>

				</p:panel>
			</h:form>
		</p:dialog>







		<p:dialog widgetVar="dialogoFeriasAfastamentoInconsistencias"
			draggable="false" resizable="false" modal="true" closable="false"
			positionType="absolute">
			<f:facet name="header">

				<h:outputText value="Férias/Afastamento/Inconsistência" />

			</f:facet>

			<h:form id="feriasAfastamentoInconsistencias">



				<p:panel header="Evento">

					<p:panelGrid id="dadosFormFeriasAfastamentoInconsistencias"
						columns="2" layout="tabular" style="margin: 0 auto;"
						styleClass="ui-noborder">


						<p:outputLabel value="Tipo Evento:" />
						<p:selectOneMenu id="tipo" style="width:310px"
							value="#{contratoTerceirizadoBean.eventoTerceirizado.tipoEvento}"
							requiredMessage="O campo Tipo é obrigatório">
							<f:selectItem itemLabel="Selecione o tipo evento..."
								noSelectionOption="true" />
							<f:selectItem itemValue="Férias" itemLabel="Férias" />
							<f:selectItem itemValue="Afastamento" itemLabel="Afastamento" />
							<f:selectItem itemValue="Inconsistência"
								itemLabel="Inconsistência" />
							<p:ajax event="change"
								update="feriasAfastamentoInconsistencias:dadosFormSubs, 
								feriasAfastamentoInconsistencias:dadosFormInco, 
								feriasAfastamentoInconsistencias:dadosFormDiasPergunta horas, 
								feriasAfastamentoInconsistencias:dadosFormDiasPergunta, 
								feriasAfastamentoInconsistencias:dadosFormDiasPergunta horas2, 
								motivo, dias, lbPessoa, funcSubstituto, dataSubstituto, :formlista:lista"
								process="@this"
								listener="#{contratoTerceirizadoBean.mostrarCamposPorTipo()}" />

						</p:selectOneMenu>


						<p:outputLabel for="dataEvento" value="Data Evento:" />


						<p:datePicker id="dataEvento" yearRange="c-120:c-14" size="50"
							pattern="dd/MM/yyyy" selectionMode="range"
							value="#{contratoTerceirizadoBean.dataEvento}" required="true"
							requiredMessage="Campo Data Evento é obrigatório"
							readonlyInput="true" showOn="">
							<p:ajax event="dateSelect"
								update="feriasAfastamentoInconsistencias:dadosFormSubs, 
								feriasAfastamentoInconsistencias:dadosFormDiasPergunta, 
								funcSubstituto, dataSubstituto, 
								:formlista:lista, 
								feriasAfastamentoInconsistencias:dadosFormDiasPergunta dias, 
								feriasAfastamentoInconsistencias:dadosFormDiasPergunta horas2"
								process="@this"
								listener="#{contratoTerceirizadoBean.carregarListaEventosPorFuncionario()}" />
						</p:datePicker>

					</p:panelGrid>





					<p:panelGrid id="dadosFormInco" columns="2" layout="tabular"
						style="margin: 0 auto;" styleClass="ui-noborder">

						<p:outputLabel value="Horas"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == true}" />



						<p:inputMask size="50" id="horas"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == true}"
							value="#{contratoTerceirizadoBean.eventoTerceirizado.horas}"
							mask="99:99" />





						<p:outputLabel value="Motivo: "
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == true}" />
						<p:inputTextarea id="motivo" maxlength="255"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == true}"
							value="#{contratoTerceirizadoBean.eventoTerceirizado.motivo}"
							counter="display" counterTemplate="Restam {0} Caracteres." />
						<h:outputText />
						<h:outputText id="display" />

					</p:panelGrid>

					<p:panelGrid id="dadosFormDiasPergunta" columns="2"
						layout="tabular" style="margin: 0 auto;" styleClass="ui-noborder">


						<p:outputLabel value="Dias"
							rendered="#{contratoTerceirizadoBean.mostrarDiasePergunta == true}" />

						<p:inputText id="dias" size="50"
							rendered="#{contratoTerceirizadoBean.mostrarDiasePergunta == true}"
							value="#{contratoTerceirizadoBean.eventoTerceirizado.dias}" />


						<p:outputLabel value="Horas"
							rendered="#{contratoTerceirizadoBean.mostrarDiaseHoras == true}" />



						<p:inputMask size="50" id="horas2"
							rendered="#{contratoTerceirizadoBean.mostrarDiaseHoras == true}"
							value="#{contratoTerceirizadoBean.eventoTerceirizado.horas}"
							mask="99:99" />




						<h:outputLabel id="lbPessoa" value="Possuí Substituto?: * "
							rendered="#{contratoTerceirizadoBean.mostrarDiasePergunta == true}"
							for="pessoa" />
						<p:selectOneRadio id="pessoa"
							rendered="#{contratoTerceirizadoBean.mostrarDiasePergunta == true}"
							value="#{contratoTerceirizadoBean.filtro}" required="true"
							requiredMessage="Campo Possuí Substitudo é obrigatório.">

							<f:selectItem itemLabel="Não" itemValue="0" />
							<f:selectItem itemLabel="Sim" itemValue="1" />

							<p:ajax event="change"
								update="feriasAfastamentoInconsistencias:dadosFormSubs, funcSubstituto, dataSubstituto"
								process="@this"
								listener="#{contratoTerceirizadoBean.habilitar()}" />


						</p:selectOneRadio>

					</p:panelGrid>


					<p:panelGrid id="dadosFormSubs" columns="2" layout="tabular"
						style="margin: 0 auto;" styleClass="ui-noborder">



						<p:outputLabel value="Substituto: "
							rendered="#{contratoTerceirizadoBean.mostrarSubstituto == true}" />
						<p:selectOneMenu id="funcSubstituto" filter="true"
							style="width:310px"
							rendered="#{contratoTerceirizadoBean.mostrarSubstituto == true}"
							requiredMessage="O campo Funcionário é obrigatório"
							converter="omnifaces.SelectItemsConverter"
							value="#{contratoTerceirizadoBean.eventoTerceirizado.substituto}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione um funcionário" />
							<f:selectItems
								value="#{contratoTerceirizadoBean.listaFuncionarios}" var="func"
								itemValue="#{func}"
								itemLabel="#{func.pessoa.nomeCompleto.toUpperCase()}" />



						</p:selectOneMenu>

						<p:outputLabel for="dataSubstituto"
							rendered="#{contratoTerceirizadoBean.mostrarSubstituto == true}"
							value="Data Substituição:" />
						<p:datePicker id="dataSubstituto" yearRange="c-120:c-14"
							required="true" requiredMessage="Campo Data Evento é obrigatório"
							rendered="#{contratoTerceirizadoBean.mostrarSubstituto == true}"
							pattern="dd/MM/yyyy" selectionMode="range" size="50"
							value="#{contratoTerceirizadoBean.dataSubstituto}"
							readonlyInput="true" showOn="" />

					</p:panelGrid>



					<br />
					<br />
					<h:panelGrid id="salvarEvento" columns="2" style="margin: 0 auto;">
						<p:commandButton value="Salvar Evento" styleClass="rounded-button ui-button-success"
							actionListener="#{contratoTerceirizadoBean.salvarEvento()}"
							update=":mensagem tabView:formularioContratos:painelDados formlista:lista"
							icon="pi pi-save"
							oncomplete="PF('dialogoFeriasAfastamentoInconsistencias').hide();">
							<f:attribute name="funcionarioSelecionado"
								value="#{contratoTerceirizadoBean.novoEvento()}" />
							<f:actionListener
								type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />

						</p:commandButton>

						<p:commandButton value="Voltar" styleClass="rounded-button ui-button-info"
							update="tabView:formularioContratos:painelDados"
							oncomplete="PF('dialogoFeriasAfastamentoInconsistencias').hide();" />

					</h:panelGrid>



				</p:panel>

			</h:form>

			<h:form id="formlista">



				<p:panel header="Eventos">

					<p:dataTable id="lista"
						emptyMessage="Nenhum evento encontrado, selecione o tipo evento e data evento para filtrar."
						paginator="true"
						value="#{contratoTerceirizadoBean.listaEventosTerceirizadosPorFuncionario}"
						var="evento" rows="10">


						<p:column headerText="Colaborador"
							sortBy="#{evento.colaborador.pessoa.nomeCompleto}"
							filterMatchMode="contains"
							filterBy="#{evento.colaborador.pessoa.nomeCompleto}"
							style="width: 20%; text-align: center;">
							<h:outputText
								value="#{evento.colaborador.pessoa.nomeCompleto.toUpperCase()}" />
						</p:column>



						<p:column headerText="Data"
							style="width: 20%; text-align: center;">
							<h:outputText
								value="#{evento.dataEventoInicial.date}/#{evento.dataEventoInicial.month+1}/#{evento.dataEventoInicial.year+1900} - #{evento.dataEventoFinal.date}/#{evento.dataEventoFinal.month+1}/#{evento.dataEventoFinal.year+1900}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>
						</p:column>

						<p:column headerText="Substituto"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == false}"
							sortBy="#{evento.substituto.pessoa.nomeCompleto}"
							filterMatchMode="contains"
							filterBy="#{evento.substituto.pessoa.nomeCompleto}"
							style="width: 20%; text-align: center;">
							<h:outputText
								value="#{evento.substituto.pessoa.nomeCompleto.toUpperCase()}"
								rendered="#{evento.substituto.pessoa.nomeCompleto!=null}" />
							<h:outputText value="SEM COBERTURA"
								rendered="#{evento.substituto.pessoa.nomeCompleto==null}" />
						</p:column>

						<p:column headerText="Data"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == false}"
							style="width: 20%; text-align: center;">
							<h:outputText
								rendered="#{evento.substituto.pessoa.nomeCompleto==null}"
								value="#{evento.dataEventoInicial.date}/#{evento.dataEventoInicial.month+1}/#{evento.dataEventoInicial.year+1900} - #{evento.dataEventoFinal.date}/#{evento.dataEventoFinal.month+1}/#{evento.dataEventoFinal.year+1900}" />
							<h:outputText
								rendered="#{evento.substituto.pessoa.nomeCompleto!=null}"
								value="#{evento.dataSubstitutoInicial.date}/#{evento.dataSubstitutoInicial.month+1}/#{evento.dataSubstitutoInicial.year+1900} - #{evento.dataSubstitutoFinal.date}/#{evento.dataSubstitutoFinal.month+1}/#{evento.dataSubstitutoFinal.year+1900}" />


						</p:column>

						<p:column headerText="Dias" sortBy="#{evento.dias}"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == false}"
							filterBy="#{evento.dias}" filterMatchMode="contains" style="width: 20%; text-align: center;">
							<h:outputText value="#{evento.dias}" />
						</p:column>

						<p:column headerText="Horas" sortBy="#{evento.horas}"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == true or contratoTerceirizadoBean.mostrarDiaseHoras == true}"
							filterBy="#{evento.horas}" filterMatchMode="contains" 
							style="width: 20%; text-align: center;">
							<h:outputText value="#{evento.horas}" />
						</p:column>

						<p:column headerText="Motivo" sortBy="#{evento.motivo}"
							rendered="#{contratoTerceirizadoBean.mostrarCamposInconsistencia == true}"
							filterBy="#{evento.motivo}" filterMatchMode="contains" 
							style="width: 20%; text-align: center;">
							<h:outputText value="#{evento.motivo}" />
						</p:column>



						<p:column headerText="Cadastrado Por"
							sortBy="#{evento.usuarioCadastro.pessoa.nomeCompleto}"
							filterMatchMode="contains"
							filterBy="#{evento.usuarioCadastro.pessoa.nomeCompleto}"
							style="width: 20%; text-align: center;">
							<h:outputText
								value="#{evento.usuarioCadastro.pessoa.nomeCompleto.toUpperCase()}" />
						</p:column>


						<p:column headerText="Opções"
							style="width: 5%; text-align: center;">



							<p:commandButton icon="ui-icon-trash"
								actionListener="#{contratoTerceirizadoBean.excluirEvento}"
								update=":mensagem feriasAfastamentoInconsistencias:dadosFormFeriasAfastamentoInconsistencias, feriasAfastamentoInconsistencias:dadosFormInco,
feriasAfastamentoInconsistencias:dadosFormDiasPergunta,
feriasAfastamentoInconsistencias:dadosFormSubs, formlista:lista">
								<p:confirm header="Confirmação"
									message="Deseja excluir o Evento?" icon="ui-icon-alert" />
								<f:attribute name="eventoSelecionado" value="#{evento}" />
							</p:commandButton>
						</p:column>




					</p:dataTable>



				</p:panel>

			</h:form>





		</p:dialog>

		<p:dialog header="Remover" widgetVar="dlg2" minHeight="40">

			<h:form id="formularioCancelar">





				<p:panelGrid id="listaRemover" columns="2"
					styleClass="showcase-text-align-center">



					<p:outputLabel value="Informe o motivo" style="font-weight: bold;" />
					<p:inputTextarea maxlength="255"
						value="#{contratoTerceirizadoBean.contratoHistFuncionario.observacao}"
						readonly="false" required="true"
						requiredMessage="O Campo motivo é obrigatório" />



				</p:panelGrid>


				<center>
					<h:panelGrid columns="2">
						<p:commandButton value="Remover" styleClass="rounded-button ui-button-danger" icon="pi pi-trash"
							actionListener="#{contratoTerceirizadoBean.excluir}"
							update=":mensagem tabView:formularioContratos:listaContratos tabView:formularioContratos:painelDados formlista:lista"
							oncomplete="PF('dlg2').hide();" />
						<p:commandButton value="Cancelar" oncomplete="PF('dlg2').hide();" styleClass="rounded-button ui-button-info" />
					</h:panelGrid>

				</center>





			</h:form>

		</p:dialog>

		<p:dialog header="Substituir" widgetVar="dlgSubs" minHeight="40">

			<h:form id="formularioSubs">





				<p:panel header="Novo Funcionário Substituto">

					<p:panelGrid id="dadosFormSubs" columns="1" layout="tabular"
						style="margin: 0 auto;" styleClass="ui-noborder">


						<p:outputLabel value="Funcionário: " style="font-weight: bold;" />
						<p:selectOneMenu id="func" filter="true" style="width:320px;"
							requiredMessage="O campo Funcionário é obrigatório"
							converter="omnifaces.SelectItemsConverter"
							value="#{contratoTerceirizadoBean.funcionarioSelecionado}">
							<f:selectItem noSelectionOption="true"
								itemLabel="Selecione um funcionário" />
							<f:selectItems
								value="#{contratoTerceirizadoBean.listaFuncionarios}" var="func"
								itemValue="#{func}"
								itemLabel="#{func.pessoa.nomeCompleto.toUpperCase()}" />


							<p:ajax event="change" update="cpf, dataNascimento, rg"
								process="@this"
								listener="#{contratoTerceirizadoBean.dadosFuncSelecionado()}" />

						</p:selectOneMenu>




						<h:outputText value="CPF:" style="font-weight: bold;" />
						<h:outputText id="cpf"
							value="#{contratoTerceirizadoBean.pessoa.cpf}" />

						<h:outputText value="RG:" style="font-weight: bold;" />
						<h:outputText id="rg"
							value="#{contratoTerceirizadoBean.pessoa.rg} #{contratoTerceirizadoBean.pessoa.rgOrgaoEmissor}" />

						<h:outputText value="Data Nascimento:" style="font-weight: bold;" />
						<h:outputText id="dataNascimento"
							value="#{contratoTerceirizadoBean.pessoa.dataNascimento}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>


						<p:outputLabel value="Informe o motivo da Substituição: *"
							style="font-weight: bold;" />
						<p:inputTextarea maxlength="255" rows="5" cols="50"
							value="#{contratoTerceirizadoBean.contratoHistFuncionario.observacao}"
							readonly="false" required="true" counter="display"
							autoResize="false" counterTemplate="Restam {0} Caracteres."
							requiredMessage="O Campo motivo é obrigatório" />

						<h:outputText id="display" />





					</p:panelGrid>

					<br />
					<br />
					<h:panelGrid columns="2" style="margin: 0 auto;">
						<p:commandButton value="Salvar" styleClass="rounded-button ui-button-success" icon="pi pi-save"
							actionListener="#{contratoTerceirizadoBean.salvarSubstituto()}"
							update=":mensagem tabView:formularioContratos:painelDados"
							oncomplete="PF('dlgSubs').hide();" >

						</p:commandButton>

						<p:commandButton value="Cancelar" styleClass="rounded-button ui-button-info"
							update="tabView:formularioContratos:painelDados"
							oncomplete="PF('dlgSubs').hide();" />

					</h:panelGrid>

				</p:panel>






			</h:form>

		</p:dialog>





	</ui:define>
</ui:composition>







