<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>




	<script>
$(document).ready(function(){
    console.log("ready is called");
    //PF('statusDialog').hide()
    $('#nonAjaxLoad').hide();
});

$(window).bind('beforeunload', function() {
     console.log("bind is called");
    // PF('statusDialog').show()
    $('#nonAjaxLoad').show(); 
});
</script>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Sistema Integrado de Gestão</title>
	<h:outputStylesheet library="css" name="estilos.css" />
	<h:outputScript library="js" name="scripts.js" />
</h:head>

<h:body>
	<p:growl id="mensagem" />



	<div id="geral">
		<div id="topo" class="divTopo">
			<p:graphicImage library="images" name="sistema.png"
				styleClass="imagemCentralizada" />
		</div>
		<div id="nonAjaxLoad">
			<p:graphicImage library="images" name="loading.gif"
				styleClass="loading" />

		</div>


		<div id="cabecalho" class="divCabecalho">
			<h:form id="formMenu">

				<p:menubar>

					<p:menuitem value="Inicio"
						url="/SIG/pages/principal.xhtml" />

					<p:submenu label="Sistema">
						<p:menuitem value="Alterar Senha" icon="ui-icon-key"
							actionListener="#{usuarioBean.editar}" update=":formalterasenha"
							id="btnAlteraSenha" oncomplete="PF('alterasenha').show();" />

					</p:submenu>


					<p:submenu label="Cadastros"
						rendered="#{autenticacaoBean.temPermissoes([1])}">
						<p:menuitem value="Estado"
							url="/SIG/pages/estado.xhtml" />
						<p:menuitem value="Cidade"
							url="/SIG/pages/cidade.xhtml" />
						<p:menuitem value="Pessoas"
							url="/SIG/pages/pessoas.xhtml" />
						<p:menuitem value="Empresas"
							url="/SIG/pages/empresas.xhtml" />
						<p:menuitem value="Usuários"
							url="/SIG/pages/usuarios.xhtml" />
						<p:menuitem value="Unidade"
							url="/SIG/pages/unidade.xhtml" />
						<p:menuitem value="Setor"
							url="/SIG/pages/setor.xhtml" />
						<p:menuitem value="Usuário Nível Acesso"
							url="/SIG/pages/usuarionivelacesso.xhtml" />
						<p:menuitem value="Usuário Status"
							url="/SIG/pages/usuariostatus.xhtml" />
					</p:submenu>

					<p:submenu label="Recurso Multa"
						rendered="#{autenticacaoBean.temPermissoes([1, 2, 7])}">
						<p:menuitem value="Recurso - Tipos"
							url="/SIG/pages/recursomultatipos.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1])}" />
						<p:menuitem value="Recurso - Cadastrar" icon="ui-icon-plusthick"
							url="/SIG/pages/recursomultacadastro.xhtml" />
						<p:menuitem value="Recurso - Receber"
							icon="ui-icon-transferthick-e-w"
							url="/SIG/pages/recursomultarecebe.xhtml" />
						<p:menuitem value="Recurso - Tramitar"
							icon="ui-icon-arrowreturnthick-1-e"
							url="/SIG/pages/recursomultasaida.xhtml" />
						<p:menuitem value="Recurso - Consulta" icon="ui-icon-search"
							url="/SIG/pages/recursomultaconsultasaida.xhtml" />


					</p:submenu>

					<p:submenu label="Credenciamento"
						rendered="#{autenticacaoBean.temPermissoes([1, 13, 17, 18])}">
						<p:menuitem value="Credenciado Cadastro" icon="ui-icon-plusthick"
							url="/SIG/pages/credenciado.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 17, 18])}" />
						<p:menuitem value="Credenciado Visão Geral" icon="ui-icon-person"
							url="/SIG/pages/credenciadogeral.xhtml" />
						<p:menuitem value="Relatório Credenciado" icon="ui-icon-calendar"
							url="/SIG/pages/credencialrelatorio.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13, 17, 18])}" />
						<p:separator style="height:7px"
							rendered="#{autenticacaoBean.temPermissoes([1, 17, 18])}" />
						<p:menuitem value="Empresa Cadastro" icon="ui-icon-plusthick"
							url="/SIG/pages/credenciadoemp.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 17, 18])}" />
						<p:menuitem value="Empresa Visão Geral" icon="ui-icon-suitcase"
							url="/SIG/pages/credenciadoempgeral.xhtml" />
						<p:menuitem value="Relatório Empresa" icon="ui-icon-calendar"
							url="/SIG/pages/credencialemprelatorio.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13, 17, 18])}" />

						<p:menuitem value="Processos andamento" icon="ui-icon-calendar"
							url="/SIG/pages/processoscodet.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1])}" />
						<p:separator style="height:7px"
							rendered="#{autenticacaoBean.temPermissoes([1, 17, 18])}" />
						<p:menuitem value="Cadastro - Status"
							url="/SIG/pages/credencialstatus.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 18])}" />
						<p:menuitem value="Cadastro - Tipo Credenciado"
							url="/SIG/pages/credencialtipo.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 18])}" />
						<p:menuitem value="Cadastro - Tipo Empresa"
							url="/SIG/pages/credencialemptipo.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 18])}" />
						<p:menuitem value="Veículo Cadastro" icon="ui-icon-plusthick"
							url="/SIG/pages/credencialveiculo.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 17, 18])}" />

					</p:submenu>

					<p:submenu label="Ofícios">
						<p:menuitem value="Novo Ofício" icon="ui-icon-document"
							url="/SIG/pages/oficio.xhtml" />
						<p:menuitem value="Saída Ofício" icon="ui-icon-transferthick-e-w"
							url="/SIG/pages/rastreio.xhtml" />
						<p:separator style="height:7px" />
						<p:menuitem rendered="#{autenticacaoBean.temPermissoes([1])}"
							value="Consulta Rastreio" icon="ui-icon-search"
							url="/SIG/pages/rastreioconsulta.xhtml" />
						<p:menuitem value="Consulta Ofício/Rastreio" icon="ui-icon-search"
							url="/SIG/pages/rastreioconsulta2.xhtml" />

						<p:separator style="height:7px" />
						<p:menuitem value="SGP-e Caderno" icon="ui-icon-document"
							url="/SIG/pages/docsgpe.xhtml" />
						<p:menuitem value="SGP-e Caderno" icon="ui-icon-search"
							url="/SIG/pages/docsgpeconsulta.xhtml" />


					</p:submenu>

					<p:submenu label="Frota">
						<p:menuitem value="Veículo" icon="ui-icon-document"
							url="/SIG/pages/frotaveiculo.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1,25])}" />
						<p:menuitem value="Condutor" icon="ui-icon-document"
							url="/SIG/pages/frotacondutor.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1,25])}" />
						<p:menuitem value="Gerencia Viagem" icon="ui-icon-document"
							url="/SIG/pages/frotaviagem.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1,25])}" />

						<p:menuitem value="Solicitar Viagem" icon="ui-icon-document"
							url="/SIG/pages/frotasolicita.xhtml" />



					</p:submenu>


					<p:submenu label="GEAPO"
						rendered="#{autenticacaoBean.temPermissoes([1, 19, 21])}">
						<p:menuitem value="Material Tipo" icon="ui-icon-document"
							url="/SIG/pages/materialtipo.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 21])}" />
						<p:menuitem value="Material Status" icon="ui-icon-document"
							url="/SIG/pages/materialstatus.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1])}" />
						<p:menuitem value="Material" icon="ui-icon-document"
							url="/SIG/pages/material.xhtml" />
						<p:menuitem value="Material Entrada" icon="ui-icon-document"
							url="/SIG/pages/materialentrada.xhtml" />
						<p:menuitem value="Solicitação Material" icon="ui-icon-document"
							url="/SIG/pages/materialsaida.xhtml" />
						<p:menuitem value="Aprovação Pedidos" icon="ui-icon-document"
							url="/SIG/pages/materialaprovacao.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 21])}" />

					</p:submenu>


					<p:submenu label="Cetran"
						rendered="#{autenticacaoBean.temPermissoes([1, 27])}">

						<p:menuitem value="Situações" icon="ui-icon-document"
							url="/SIG/pages/cetran/situacao.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 27])}" />
						<p:menuitem value="Representação" icon="ui-icon-document"
							url="/SIG/pages/cetran/representacao.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 27])}" />
						<p:menuitem value="Conselheiros" icon="ui-icon-document"
							url="/SIG/pages/cetran/conselheiro.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 27])}" />

						<p:menuitem value="Processos" icon="ui-icon-document"
							url="/SIG/pages/cetran/requerente.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 27])}" />

						<p:menuitem value="Vincular Conselheiro" icon="ui-icon-document"
							url="/SIG/pages/cetran/vincularprocesso.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 27])}" />

						<p:menuitem value="Relatório e Histórico" icon="ui-icon-document"
							url="/SIG/pages/cetran/relatoriodistribuicao.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 27])}" />

					</p:submenu>


					<p:submenu label="Corregedoria"
						rendered="#{autenticacaoBean.temPermissoes([1, 13])}">

						<p:menuitem value="Nomenclatura Processo" icon="ui-icon-document"
							url="/SIG/pages/codet/nomenclaturaprocesso.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13])}" />
						<p:menuitem value="Situação Processo" icon="ui-icon-document"
							url="/SIG/pages/codet/situacaoprocesso.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13])}" />
						<p:menuitem value="Setor Atual" icon="ui-icon-document"
							url="/SIG/pages/codet/setoratual.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13])}" />
						<p:menuitem value="Penalidade Processo" icon="ui-icon-document"
							url="/SIG/pages/codet/penalidadeprocesso.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13])}" />


						<p:menuitem value="Processos" icon="ui-icon-document"
							url="/SIG/pages/codet/processos.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13])}" />
							
							<p:menuitem value="Relatório Setor/Situação" icon="ui-icon-document"
							url="/SIG/pages/codet/relatorioprocesso.xhtml"
							rendered="#{autenticacaoBean.temPermissoes([1, 13])}" />


					</p:submenu>

					<p:submenu label="Solicitações">
						<p:menuitem value="Acessos" icon="ui-icon-document"
							url="/SIG/pages/acessos.xhtml" />

					</p:submenu>

					<f:facet name="options">
						<p:outputLabel style="margin:1px 10px 1px 1px;"
							value="#{autenticacaoBean.usuarioLogado.pessoa.nomeCompleto}" />
						<p:commandButton value="Logout" icon="ui-icon-power"
							action="#{autenticacaoBean.logout}" ajax="false" />
					</f:facet>

				</p:menubar>

			</h:form>
		</div>



		<p:dialog header="Alterar Senha" widgetVar="alterasenha"
			draggable="false" resizable="false" modal="true" closable="false">
			<h:form id="formalterasenha">
				<h:panelGrid id="cadastro" columns="2">

					<p:outputLabel value="Usuário: " rendered="false" />
					<p:selectOneMenu value="#{autenticacaoBean.usuarioLogado}"
						converter="omnifaces.SelectItemsConverter" required="true"
						requiredMessage="O campo Setor Abertura é obrigatório"
						rendered="false">
						<f:selectItem
							itemLabel="#{autenticacaoBean.usuarioLogado.pessoa.nomeCompleto}"
							itemValue="#{autenticacaoBean.usuarioLogado}" rendered="false" />
					</p:selectOneMenu>

					<p:outputLabel for="senha" value="Senha:" />
					<p:password id="senha" maxlength="10" size="8"
						value="#{autenticacaoBean.usuarioLogado.senha}" feedback="true"
						promptLabel="Favor inserir nova senha." weakLabel="Fraco"
						goodLabel="Normal" strongLabel="Forte" required="true"
						match="confirmaSenha"
						requiredMessage="O campo Senha é obrigatório."
						validatorMessage="Informe uma senha de 4 a 10 caracteres.">
						<f:validateLength minimum="4" maximum="10" />
					</p:password>

					<p:outputLabel for="confirmaSenha" value="Confirmação: " />
					<p:password id="confirmaSenha" maxlength="10" size="8"
						required="true" onblur="#{usuarioBean}"
						validatorMessage="Os valore digitados não são iguais." />

				</h:panelGrid>

				<h:panelGrid columns="2">
					<p:commandButton value="Salvar"
						actionListener="#{autenticacaoBean.alterarSenha}"
						update=":mensagem formalterasenha" />
					<p:commandButton value="Fechar"
						oncomplete="PF('alterasenha').hide();" />
				</h:panelGrid>
			</h:form>
		</p:dialog>



		<div id="conteudo">



			<ui:insert name="conteudo" />


		</div>
	</div>
</h:body>
</html>







